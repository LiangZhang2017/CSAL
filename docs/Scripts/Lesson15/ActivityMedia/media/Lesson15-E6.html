<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		
		<title>CSAL Media</title>

		
		<!--CSS Reset-->
		<script type="text/css" href="CSSReset.css" rel="stylesheet"></script>
		
		<!--load Google fonts-->
		<link href='https://fonts.googleapis.com/css?family=Bree+Serif' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
		
		<!--load jQuery libraries-->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js" type="text/javascript"></script> 
		
		<!--load jScrollPane libraries and CSS-->
		<link type="text/css" href="jScrollPane/style/jquery.jscrollpane.css" rel="stylesheet" media="all" />
		
		<script type="text/javascript" src="jScrollPane/script/jquery.jscrollpane.min.js"></script>
		
		<style type="text/css" id="page-css">
				body
			{
				background-image:url('L15Bkgd0.png');
				background-repeat: no-repeat;
				background-size: cover;
				overflow: hidden;
				margin: 0px;
				font-family: 'Varela Round', Verdana, 'Times New Roman';
				cursor: default;
			}
			.scroll-pane
			{
				overflow: auto;
				height: 482px;
				width: 828px;
				margin-top: 1px;
			}
			#mainText
			{
				font-size: 22px;
				padding: 15px 30px 0px 30px;
				line-height: 38px;
				color: #212121;
				width: 708px;
				margin: 10px 0px 0px 5px;
			}
			#mainTextHead
			{
				font-family: 'Bree Serif', Verdana, 'Times New Roman';
				font-size: 56px;
				line-height: 56px;
				margin: 10px 0px 15px 0px;
				font-weight: bold;
				text-decoration: underline;
				text-align: center;
			}
			.textImg
			{
				width: 300px;
				border: 2px solid white;
			}
			#spiral
			{
				float: left;
				margin: 10px 20px 0px 0px;
			}
			#elliptical
			{
				float: right;
				margin: 10px 0px 0px 20px;
			}
			.keyword1
			{
				font-size: 28px;
				font-weight: bold;
				text-decoration: underline;
			}
			.keyword2
			{
				font-size: 28px;
				font-weight: bold;
			}
			.indent { margin: 0px 25px; }
			.para { margin: 15px 0px; }
			
			#checkScroll
			{
				width: 40px;
				height: 250px;
				background-color: red;
				position: fixed;
				top: 0;
				left: 0;
			}
			#nextPage
			{
				width: 55px;
				height: 75px;
				background-color: #424242;
				position: fixed;
				bottom: 0;
				right: 0;
				border-top-left-radius: 10px;
				cursor: pointer;
			}
			#prevPage
			{
				width: 55px;
				height: 75px;
				background-color: #424242;
				position: fixed;
				top: 0px;
				right: 0;
				border-bottom-left-radius: 10px;
				cursor: pointer;
			}
			#nextPage img { margin: 2px; }
			#prevPage img { margin: 2px; }
			.pageBreak1
			{
				height: 35px;
			}
			.pageBreak2
			{
				height: 25px;
			}
			.pageBreak3
			{
				height: 15px;
			}
			.pageNbr
			{
				font-family: 'Bree Serif', Verdana, 'Times New Roman';
				position: relative;
				bottom: 5px;
				left: 330px;
				margin: 0px 0px 0px 0px;
				width: 25px;
				text-align: center;
				font-weight: bold;
			}
			#buttonBox
			{
				width: 780px;
				margin: 0px 0px 0px 12px;
				display: inline-block;
			}
			.mybutton
			{
				font-size: 24px;
				font-family: Raleway, Verdana, 'Times New Roman';
				font-weight: normal;
				color: white;
				width: 760px;
				margin: 4px 4px;
				text-align: center;
				padding: 2px 5px;
				text-decoration: none;
				display: block;
				border: none;
				outline: none;
				border-radius: 8px;
			}
			#questionToggle
			{
				width: 800px;
				height: 210px;
				background-color: #424242;
				position: fixed;
				top: 0px;
				right: 0;
				z-index: 2;
				display: none;
				cursor: pointer;
			}
			#questionText
			{
				color: white;
				font-size: 28px;
				padding: 5px 20px;
				text-align: center;
				width: 720px;
				margin: 5px 0px 5px 20px;
				vertical-align: top;
			}
			#questionToggleBtn
			{
				width: 420px;
				height: 30px;
				font-size: 20px;
				background-color: #424242;
				color: white;
				position: fixed;
				top: 210px;
				left: 180px;
				padding: 5px 0px 0px 0px;
				z-index: 1;
				border-bottom-right-radius: 8px;
				border-bottom-left-radius: 8px;
				border: 3px solid #828282;
				border-top: 3px dashed white;
				text-align: center;
				display: none;
				cursor: pointer;
			}
			#questionToggleBtn2
			{
				width: 420px;
				height: 26px;
				font-size: 20px;
				background-color: #424242;
				color: white;
				position: fixed;
				top: 0px;
				left: 180px;
				padding: 3px 0px 0px 0px;
				z-index: 1;
				border: 3px solid #828282;
				border-top: none;
				border-bottom-right-radius: 8px;
				border-bottom-left-radius: 8px;
				text-align: center;
				cursor: pointer;
			}
			#img1
			{
				float: right;
				padding: 0px 0px 5px 10px;
			}
			#img2
			{
				float: left;
				padding: 5px 10px 5px 0px;
			}
			#img3
			{
				float: right;
				padding: 5px 10px 5px 0px;
			}
			#img4
			{
				float: right;
				padding: 0px 0px 5px 10px;
			}
			#img5
			{
				float: left;
				margin: 5px 10px 0px 5px;
			}
			#img6
			{
				margin: 0px auto;
				width: 700px;
			}
			#imgend
			{
				width: 700px;
				margin: 5px 0px;
			}
		</style>
		<script type="text/javascript" id="sourcecode">
			var flag = 0;
			var moveAmount = 0;
			var newAmount = 0;
			var calc;
			var height;
			var currentPos;
			var toggleState = false;
			var itemsArray=["b1","b2","b3"];
			var score=0;
			var userAnswerTimes=0;
			//you can store multiple answers in this array if needed
			//**************
			var correctAnswerArray = ["b3"];
			var currentItem = -1;
			var numItems = 0;
			var JordanAnswer;
			var userAnswerCode;
			var JordanAnswerCode;
			
			$(document).ready(function()
			{				
				//lock the buttons
				Lock();
				parent.GetWorldEvent("MediaLoadedEasy");
				//create scroll pane element
				$scrollElement = $("#textbox").jScrollPane({animateScroll: true, animateDuration: 1000});
				
				ScrollToId($scrollElement, "b1");
				
				//shows the questionToggle box on start
				$( "#questionToggle" ).slideToggle( 2000, function()
				{
					$( "#questionToggleBtn" ).slideToggle( 400 );
				});
				
				//sets opacity of questionToggle box
				$( "#questionToggle" ).fadeTo( 0, .99 );
				
				//this animation will show the questionToggle if most places on the screen are clicked
				$( ".scroll-pane" ).click(function(e)
				{
					//if a button is clicked, it will not trigger the questionToggle animation
					if($(e.target).is( ".mybutton" ))
					{
						e.preventDefault();
						return;
					}
					
					//find out if the questionToggle is toggled
					toggleState = $( '#questionToggle' ).is(":visible");
					
					if (toggleState == true)
					{
						$( "#questionToggleBtn" ).slideToggle( 200, function()
						{
							$( "#questionToggle" ).slideToggle( 1000 );
						});
					}
					if (toggleState == false)
					{
						$( "#questionToggle" ).slideToggle( 1000, function()
						{
							$( "#questionToggleBtn" ).slideToggle( 200 );
						});
						ScrollToId($scrollElement);
					}
				});
			});
			
			function ScrollToId($scrollElement)
			{
				var api = $scrollElement.data('jsp');
				api.scrollToY(964);
				//Pg1 >> Pg2 >> Pg3 >> Pg 4 >> Pg5  >> Pg6  >> Pg7  >> Pg8
				//0   >> 482 >> 964 >> 1446 >> 1928 >> 2410 >> 2892 >> 3374
			}
			function GetItem()
			{
				if(currentItem < numItems)
				{
					++currentItem;
					return parent.GetWorldEvent("Continue");
				}
				else
				{
					return parent.GetWorldEvent("Stop");
				}
			}
			function ShowItem()
			{
				if(currentItem == 0)
				{
					//animate answer box appearance
					
				}
			}
			function ShowMediaAnswer()
			{
				
						
				if( userAnswer == "Incorrect" )
				{
					//do nothing
				}else if( userAnswer == "Correct" )
				{
					//play the correct answer sound
					parent.PlaySound('success0.wav');
				}
				$("#displaySentence1").animate({backgroundColor: "green", color: "white"}, 1000);
				$("#" + correctAnswerArray[0]).animate({backgroundColor: "green", color: "white"}, 1000);
				
			}
			function Lock()
			{
				//unbinds click function and hover
				$( ".mybutton" ).unbind("click");
				$( ".mybutton" ).unbind("mouseover");
				$( ".mybutton" ).unbind("mouseout");
				
				//sets disabled mouse cursor
				$( ".mybutton" ).css( 'cursor', 'not-allowed' );
				
				//sets disabled colors WITH animation
				$( ".mybutton" ).animate({backgroundColor: "#474747", color: "gray"}, 700);
			}
			
			function Unlock()
			{
				var api = $scrollElement.data('jsp');
				var height = api.getContentHeight()-482;
				
				$( "#nextPage" ).click(function(f)
				{
					var isAnimating1 = $( this ).is(':animated');
					var isAnimating2 = $( "#prevPage" ).is(':animated');
					
					currentPos = api.getContentPositionY();
					calc =  1 - (currentPos / height);
					
					if (isAnimating1 == true || isAnimating2 == true || calc == 0)
					{
						f.preventDefault();
						return;
					}
					
					if(currentPos != 0 && calc < .175 && calc != 0)
					{
						moveAmount = -(height-currentPos);
						flag = 1;
					}
					else
					{
						flag = 0;
					}
					
					$(this).animate({backgroundColor: "gray"}, 75);
					$(this).animate({backgroundColor: "#424242"}, 1000);
					parent.PlaySound('pageturn.wav');
					api.scrollByY(482);
				});
				
				$( "#prevPage" ).click(function(g)
				{
					var isAnimating3 = $( this ).is(':animated');
					var isAnimating4 = $( "#nextPage" ).is(':animated');
					
					if (isAnimating3 == true || isAnimating4 == true)
					{
						g.preventDefault();
						return;
					}
					
					currentPos = api.getContentPositionY();
					calc =  1 - (currentPos / height);
					
					if (flag == 1)
					{
						newAmount = moveAmount;
						flag = 0;
					}
					else
					{
						newAmount = -482;
					}
					
					$(this).animate({backgroundColor: "gray"}, 75);
					$(this).animate({backgroundColor: "#424242"}, 1000);
					parent.PlaySound('pageturn.wav');
					api.scrollByY(newAmount);
				});
			
				//this section determines the font size for the click animation used in the clickFunc function below
				var butFontSize = $( ".mybutton" ).css( "font-size" );
				var butFontSizeRaw = butFontSize.replace(/\D/g,'');
				var butAnimSize = butFontSizeRaw - 2 + "px";
				
				var clickFunc = function()
				{
					//store the user's answer
					userAnswer = $(this).attr("value");
					userSelectedItem = $(this).attr("id");
					userSelectedValue=document.getElementById(userSelectedItem).innerHTML;
					userSelectedValue=userSelectedValue.replace(/[\r\n]/g,"");
					userSelectedValue=userSelectedValue.replace(/[\/#$%\^&\*{}=_`~()\"]/g,"");		
					
					//play appropriate sound
					userAnswerTimes++;
					//play appropriate sound
					if (userAnswer == "Correct"){ 
						if (userAnswerTimes==1)
						{
						
							score=2+score;
						}
						else if (userAnswerTimes==2)
						{
							score=1+score;
						}
											
						parent.PlaySound('clicked0.wav');
					}
					else { parent.PlaySound('incorrect0.wav'); }
					
					//animate button click
					$(this).animate({fontSize: butAnimSize}, 75);
					$(this).animate({fontSize: butFontSize}, 600);
					
					//lock buttons
					Lock();
					
					//set selection color and report answer to ASAT
					$(this).animate({backgroundColor: "#edff73", color: "#212121"}, 600);
					parent.GetWorldEvent("userAnswer_"+userAnswer+"_"+userSelectedValue);
				};
				
				//this sets the hover animation & cursor for buttons
				$( ".mybutton" ).mouseover(function()
				{ $(this).animate({backgroundColor: "#edff73"}, 300); });
				$( ".mybutton" ).mouseout(function()
				{ $(this).animate({backgroundColor: "white"}, 300); });
				$( ".mybutton" ).css( 'cursor', 'pointer' );
				
				//animates unlocking via font color & background color
				$(".mybutton").animate({backgroundColor: "white;", color: "#212121"}, 1000);
				
				//bind the clickFunc above to any ".mybutton"
				$(".mybutton").bind( "click", clickFunc );
			}
			function GetMediaEvent(data)
			{
				
				
				//go to next page
				if (data == "NextPage")
				{	
				//*********
					parent.nextPage("media/"+"Lesson15-E7.html");
				}
				else if (data == "Difficulty")
				{
					parent.GetWorldEvent("Easy");
				}
				else if(data=="JordanGood")
				{
					JordanAnswer = $("#b3").attr("value");
					$("#b3").animate({backgroundColor: "blue", color: "white"}, 1000);
					
					parent.GetWorldEvent(JordanAnswer);
				}
				else if(data=="JordanBad1")
				{
					JordanAnswer = $("#b1").attr("value");
					$("#b1").animate({backgroundColor: "blue", color: "white"}, 1000);
					
					parent.GetWorldEvent(JordanAnswer);
				}
				else if(data=="JordanBad2")
				{
					JordanAnswer = $("#b2").attr("value");
					$("#b2").animate({backgroundColor: "blue", color: "white"}, 1000);
					
					parent.GetWorldEvent(JordanAnswer);
				}
				else if(data=="bothAnswer")
				{
				  if (userAnswer=="Correct")
				  {
					userAnswerCode="C";
				  }
				  else if(userAnswer=="Incorrect1")
				  {
				  userAnswerCode="I1";
				  }
				  else if(userAnswer=="Incorrect2")
				  {
				  userAnswerCode="I2";
				  }
				   if (JordanAnswer=="Correct")
				  {
					JordanAnswerCode="C";
				  }
				  else if(JordanAnswer=="Incorrect1")
				  {
				  JordanAnswerCode="I1";
				  }
				  else if(JordanAnswer=="Incorrect2")
				  {
				  JordanAnswerCode="I2";
				  }
				  var getScore=userAnswerCode+JordanAnswerCode;
				  parent.GetWorldEvent(getScore);
				}
			}
		</script>
	</head>
	<body>
		<div id="prevPage"><img src="last.png"></div>
		<div id="nextPage"><img src="next.png"></div>
		<div id="textbox" class="scroll-pane">
			<div id="questionToggle">
				<div id="questionText">
					What is the cause of the problem/conflict? 
				</div>
				<div id="buttonBox">
					<div class="mybutton" id="b1" value="Incorrect1">A. Turandot only wants to marry the smartest prince. </div>
					<div class="mybutton" id="b2" value="Incorrect2">B. Turandot is following the procedure of Imperial Chinese marriage laws.</div>
					<div class="mybutton" id="b3" value="Correct">C. Turandot wants to avenge her ancestor, Princess Lo-u-Ping.</div>
				</div>
			</div>
			<div id="questionToggleBtn">CLICK TO HIDE THE QUESTION</div>
			<div id="questionToggleBtn2">CLICK TO SHOW THE QUESTION</div>
			<div id="mainText">
				<div id="mainTextHead">
					Turandot
				</div>
				<div id="para1" class="para">
				<span class="indent"></span><img src="temple0.png" class="image" id="img1">From legend in Imperial China, there was a beautiful princess, whose name was Turandot. Though Turandot's beauty was legendary, her heart was cold and she had decreed that any man who desired to wed her must first answer her three riddles. If he failed, he would be beheaded. The Prince of Persia had just failed her test and was to be beheaded at moonrise.
				<div class="pageNbr">1</div><div class="pageBreak3"></div>
				</div>
				
				<div id="para2" class="para">
				<span class="indent"></span>The moon rose and the doomed Prince of Persia was led <img src="prince0.png" class="image" id="img2">before the crowd on his way to execution. The young Prince was so handsome and kind that the crowd was moved to compassion. They called on Turandot to spare his life. She appeared, but with a single gesture ordered the execution to continue. The Prince of Tartary was in the crowd that evening. In spite of her cruelty, the Prince of Tartary fell in love with Turandot at first sight. As he gazed at her beauty, the crowd screamed in horror as the Prince of Persia was beheaded.
				<div class="pageNbr">2</div><div class="pageBreak"></div>
				</div>
				
				<div id="para3" class="para">
				<span class="indent"></span>The Prince of Tartary went to the front of the Palace and <img src="gong0.png" class="image" id="img3">struck the gong that announced a new suitor. By striking it three times, the Prince indicates that he will attempt the riddles he must answer in order to marry Princess Turandot. Turandot's father,  Emperor Altoum, urged the Prince to withdraw his challenge. The Prince refused. Turandot appeared. <span id="displaySentence1">She revealed that her ancestor, Princess Lo-u-Ping was murdered by an invading foreign prince. Out of revenge, Turandot swore never to let any man possess her.</span> The Princess warned the Prince of Tartary to withdraw. The Prince refused again.<div class="pageNbr">3</div><div class="pageBreak"></div>
				</div>
				
				<div id="para4" class="para">
				<span class="indent"></span>Turandot presented her first riddle:
				'What is born each night and dies each dawn?'
				</div>
				<div id="para5" class="para">
				<span class="indent"></span>The Prince replied: 'Hope!'</div>
				<div id="para6" class="para">
				<span class="indent"></span>The Prince's answer to the first riddle was correct. Unnerved, Turandot presented her second riddle: 'What flickers red and warm like a flame, but is not fire?'
				</div>
				<div id="para7" class="para">
				<span class="indent"></span>The prince thought for a moment, then said: 'Blood!'
				</div>
				<div id="para8" class="para">
				<span class="indent"></span>And the Prince was correct again! Turandot became a bit shaken. The crowd cheered for the Prince. Turandot, provoked by anger, presented her third and final riddle:
				<div class="pageNbr">4</div><div class="pageBreak"></div>
				</div>
				
				<div id="para9" class="para">
				<span class="indent"></span>"What is ice which gives you fire and which your fire freezes still more?"
				</div>
				
				<div id="para10" class="para">
				<span class="indent"></span>The Prince seemed to be stuck on this last riddle. Turandot taunted him to answer it. While she was taunting him, the Prince saw the true answer and proclaimed: "It is you, Turandot!"
				</div>
				
				<div id="para11" class="para">
				<span class="indent"></span>The crowd cheered for the triumphant Prince. The Princess Turandot threw herself at her father's feet. She begged the Emperor not to leave her to the Prince's mercy. The Emperor insisted that the marriage oath was sacred. So, Turandot must now marry the Prince of Tartary. Turandot called to the Prince in despair:
				<div class="pageNbr">5</div><div class="pageBreak1"></div>				
				</div>
				
				<div id="para12" class="para">
				<span class="indent"></span>'Will you take me by force?'
				</div>
				<div id="para13" class="para">
				<span class="indent"></span>The Prince stopped her. He said to Turandot: 'Great Imperial Princess of China, I now have a riddle for you. You do not know my name.<img src="princess0.png" class="image" id="img4"> If you can tell me my name before sunrise, I will gladly die by your hand.'
				</div>
				<div id="para14" class="para">
				<span class="indent"></span>Turandot accepted the challenge.
				</div>
				<div id="para15" class="para">
				<span class="indent"></span>That night, Turandot proclaimed that none shall sleep until the name of the Prince is discovered. Turandot captured the Prince's maid, Liu. Turandot tortured Liu for the Prince's name, but the maid was in love with her Prince.
				<div class="pageNbr">6</div><div class="pageBreak3"></div>
				</div>
				
				<div id="para16 class="para">
				<span class="indent"></span>Turandot asked the maid how she can withstand the pain of torture and Liu told her that her secret was love. <img src="dagger0.png" class="image" id="img5">Rather than reveal the identity of the prince, Liu grabbed a dagger and killed herself. The Prince reproached Turandot for her cruelty: 'You are the Princess of death!'
				</div>
				
				<div id="para17" class="para">
				<span class="indent"></span>But after speaking those words, the Prince suddenly took Turandot into his arms and kissed her. Turandot resisted but could not stop the Prince's kiss.	With the kiss from the Prince, Turandot felt emotion for the first time. Passionately, she cried:
				<div class="pageNbr">7</div><div class="pageBreak3"></div>
				</div>
				
				<div id="para18" class="para">
				<span class="indent"></span>'Ever since you came to my land, I have both loved and hated you. I now ask you to leave! Take your mystery with you!'
				</div>
				
				<div id="para19" class="para">
				<span class="indent"></span>
				The Prince replied: 'My name is Calaf, son of Timur. My life is now in your hands!'
				Morning came. The crowd saw that Turandot and Calaf approached the Emperor's throne.
				</div>
				
				<img src="love0.png" class="image" id="img6">
				
				<div class="pageNbr">8</div><div class="pageBreak"></div>
				
				<div id="para20" class="para">
				<span class="indent"></span>Turandot declared that she knew the name of the Prince: 'It is... love!' The crowd was amazed and cheered the two lovers. 
				</div>
				
				<img src="end1.png" class="image" id="imgend">
			</div>
		</div>
	</body>
</html>
